<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Login - Panadería</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div class="card">
        <h2>Inicio de sesión</h2>
        <form id="loginForm">
            <label>Usuario</label>
            <input type="text" id="username" required />
            <label>Contraseña</label>
            <input type="password" id="password" required />
            <div class="error" id="errorMsg"></div>
            <button type="submit">Entrar</button>
        </form>
        <p>Usuarios de ejemplo: Jefe / jefe123 · cajero / cajero123 · Panadero / panadero123</p>

        <!-- Botón Información debajo del formulario -->
        <a class="hoja_informacion" href="informacion_login.html">Información</a>
    </div>

    <script>
        const users = [
            { username: 'Jefe', password: 'jefe123', page: 'Jefe.html' },
            { username: 'cajero', password: 'cajero123', page: 'cajero.html' },
            { username: 'Panadero', password: 'panadero123', page: 'panaderoJefe.html' }
        ];

        const form = document.getElementById('loginForm');
        const errorMsg = document.getElementById('errorMsg');

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const u = document.getElementById('username').value.trim();
            const p = document.getElementById('password').value;

            const user = users.find(x => x.username === u);
            if (!user || user.password !== p) {
                errorMsg.textContent = 'Usuario o contraseña incorrectos.';
                return;
            }

            const session = { username: user.username, page: user.page, loggedAt: Date.now() };
            sessionStorage.setItem('panaderia_session', JSON.stringify(session));
            window.location.href = user.page;
        });

        const active = sessionStorage.getItem('panaderia_session');
        if (active) {
            try {
                const s = JSON.parse(active);
                if (s && s.page) window.location.href = s.page;
            } catch {}
        }
    </script>
</body>
</html>